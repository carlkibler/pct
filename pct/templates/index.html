{% extends "base.html" %}

{% block content %}
        <div class="row">
            <div class="col-md-5 map-container">
                <div id="map"></div>
            </div>
            <div class="col article-container">
                {% for update in updates %} {% include update.template %} {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}

{% block extrahead %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'leaflet/leaflet.css' %}">
{% endblock extrahead %}


{% block afterbody %}
    <script>
        // FIXME: shuold be a bit more dynamic given content, but this'll do for now
        var map = L.map('map').setView([40.224437, -121.350511], 6);

        // see: https://leaflet-extras.github.io/leaflet-providers/preview/#filter=Esri
        var Esri_NatGeoWorldMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC',
            maxZoom: 16
        });

        Esri_NatGeoWorldMap.addTo(map);

        {% if latest_location %}L.marker([{{ latest_location.y}},{{ latest_location.x }}]).addTo(map);{% endif %}
    </script>
{% endblock afterbody %}

